<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Pacman_project1代码及解析 | Blog for You</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="一、前言：初学人工智能，感到非常好玩，老师留了一个Pacman Project，经查阅，伯克利大学的人工智能课程也用这个Project作为实验教材。为了方便同学们，我写了Project 1——search的代码，并对每行代码进行详细的注释解析。（网上有别人写好的代码，但是很乱，而且没有注释。。。）
二、进入正题：1.问题1：应用深度优先算法找到一个特定的位置的豆你的code应该能顺利解决以下问题：">
<meta property="og:type" content="article">
<meta property="og:title" content="Pacman_project1代码及解析">
<meta property="og:url" content="http://lovebear.top/2016/12/13/Pacman_project1代码及解析/index.html">
<meta property="og:site_name" content="Blog for You">
<meta property="og:description" content="一、前言：初学人工智能，感到非常好玩，老师留了一个Pacman Project，经查阅，伯克利大学的人工智能课程也用这个Project作为实验教材。为了方便同学们，我写了Project 1——search的代码，并对每行代码进行详细的注释解析。（网上有别人写好的代码，但是很乱，而且没有注释。。。）
二、进入正题：1.问题1：应用深度优先算法找到一个特定的位置的豆你的code应该能顺利解决以下问题：">
<meta property="og:image" content="http://oeqaghyw9.bkt.clouddn.com/54494-106.jpg">
<meta property="og:image" content="http://oeqaghyw9.bkt.clouddn.com/flag.jpg">
<meta property="og:updated_time" content="2016-12-13T14:17:15.689Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Pacman_project1代码及解析">
<meta name="twitter:description" content="一、前言：初学人工智能，感到非常好玩，老师留了一个Pacman Project，经查阅，伯克利大学的人工智能课程也用这个Project作为实验教材。为了方便同学们，我写了Project 1——search的代码，并对每行代码进行详细的注释解析。（网上有别人写好的代码，但是很乱，而且没有注释。。。）
二、进入正题：1.问题1：应用深度优先算法找到一个特定的位置的豆你的code应该能顺利解决以下问题：">
<meta name="twitter:image" content="http://oeqaghyw9.bkt.clouddn.com/54494-106.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Blog for You" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Blog for You</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">someone there for you</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://lovebear.top"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Pacman_project1代码及解析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/13/Pacman_project1代码及解析/" class="article-date">
  <time datetime="2016-12-13T13:37:20.392Z" itemprop="datePublished">2016-12-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="http://oeqaghyw9.bkt.clouddn.com/54494-106.jpg" rel="gallery_ciwo6tntd0003ngosv418uqg9">
        <img src="http://oeqaghyw9.bkt.clouddn.com/54494-106.jpg" itemprop="image">
      </a>
    
      <a class="article-gallery-img fancybox" href="http://oeqaghyw9.bkt.clouddn.com/flag.jpg" rel="gallery_ciwo6tntd0003ngosv418uqg9">
        <img src="http://oeqaghyw9.bkt.clouddn.com/flag.jpg" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Pacman_project1代码及解析
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、前言："><a href="#一、前言：" class="headerlink" title="一、前言："></a>一、前言：</h2><p>初学人工智能，感到非常好玩，老师留了一个Pacman Project，经查阅，伯克利大学的人工智能<br>课程也用这个Project作为实验教材。为了方便同学们，我写了Project 1——search的代码，并对每行<br>代码进行详细的注释解析。（网上有别人写好的代码，但是很乱，而且没有注释。。。）</p>
<h2 id="二、进入正题："><a href="#二、进入正题：" class="headerlink" title="二、进入正题："></a>二、进入正题：</h2><h3 id="1-问题1：应用深度优先算法找到一个特定的位置的豆"><a href="#1-问题1：应用深度优先算法找到一个特定的位置的豆" class="headerlink" title="1.问题1：应用深度优先算法找到一个特定的位置的豆"></a>1.问题1：应用深度优先算法找到一个特定的位置的豆</h3><p>你的code应该能顺利解决以下问题：<br>python pacman.py -l tinyMaze -p SearchAgent<br>python pacman.py -l mediumMaze -p SearchAgent<br>python pacman.py -l bigMaze -z .5 -p SearchAgent</p>
<p>废话不多说，直接上代码加注释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">def graphSearch(problem, fringe):</div><div class="line">	pgss=problem.getStartState()     #获取problem的初始状态</div><div class="line">	print &quot;Start:&quot;, pgss       #打印problem的初始状态</div><div class="line">  	print &quot;Is the start a goal?&quot;, problem.isGoalState(pgss)  #判断初始状态是目标状态吗</div><div class="line">  	print &quot;Start&apos;s successors:&quot;, problem.getSuccessors(pgss) #打印初始状态的子状态（与这一状态连接的可达状态）</div><div class="line">  	</div><div class="line">  	visited = []       #记录这个状态是否访问过，访问过的状态都被添加到visited列表里</div><div class="line">  	fringe.push([(pgss, &quot;Stop&quot; , 0)])    #向数据及结构（依fringe定义的数据结构而定）压入初始状态三元组构成</div><div class="line">                                        #的访问路径，三元组元素分别为状态，方向，访问步数</div><div class="line">  	</div><div class="line">  	while not fringe.isEmpty():   #数据结构不为空一直循环</div><div class="line">  		path = fringe.pop() 	#将数据弹出一个（栈顶，队首...）路径</div><div class="line">  		s = path[len(path)-1]    #取得路径末的三元组（及访问路径中最后一个状态所在的三元组）</div><div class="line">  		s = s[0]                #取得本路径的最后状态</div><div class="line">  		if problem.isGoalState(s):    #如果取得的这最后一个状态就是我们的目标状态，则搜索结束</div><div class="line">  			return [x[1] for x in path][1:]   #返回路径中所有的方向（除去初始状态的方向）</div><div class="line">  			</div><div class="line">  		if s not in visited:          #如果这个状态还没被访问过</div><div class="line">  			visited.append(s)         #访问这个状态，并将这个状态添加到访问记录列表visited[]中</div><div class="line">  			</div><div class="line">  			for successor in problem.getSuccessors(s):    #遍历现状态的子状态</div><div class="line">  				if successor[0] not in visited:			#子状态没有被访问过</div><div class="line">  					successorPath = path[:]            #创建新的子状态路径（复制当前状态的路径），此处的[:]</div><div class="line">                                                    #为了防止python的引用处理，这样可以真正创建新的路径</div><div class="line">  					successorPath.append(successor)#在原状态路径后面添加上当前访问的子状态，得到新的状态路径</div><div class="line">  					fringe.push(successorPath)       #将新的状态路径压入数据结构中</div><div class="line">	return []  </div><div class="line"></div><div class="line">def depthFirstSearch(problem):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    Search the deepest nodes in the search tree first.</div><div class="line"></div><div class="line">    Your search algorithm needs to return a list of actions that reaches the</div><div class="line">    goal. Make sure to implement a graph search algorithm.</div><div class="line"></div><div class="line">    To get started, you might want to try some of these simple commands to</div><div class="line">    understand the search problem that is being passed in:</div><div class="line"></div><div class="line">    print &quot;Start:&quot;, problem.getStartState()</div><div class="line">    print &quot;Is the start a goal?&quot;, problem.isGoalState(problem.getStartState())</div><div class="line">    print &quot;Start&apos;s successors:&quot;, problem.getSuccessors(problem.getStartState())</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">    fringe = util.Stack()    #fringe数据结构为栈，进行dfs</div><div class="line">    return graphSearch(problem, fringe)</div></pre></td></tr></table></figure>
<h3 id="2-问题2：宽度优先算法"><a href="#2-问题2：宽度优先算法" class="headerlink" title="2.问题2：宽度优先算法"></a>2.问题2：宽度优先算法</h3><p>python pacman.py -l mediumMaze -p SearchAgent -a fn=bfs<br>python pacman.py -l bigMaze -p SearchAgent -a fn=bfs -z .5</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">def breadthFirstSearch(problem):</div><div class="line">    &quot;&quot;&quot;Search the shallowest nodes in the search tree first.&quot;&quot;&quot;</div><div class="line">    &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">    fringe = util.Queue()    #fringe数据结构为队列，进行bfs</div><div class="line">    return graphSearch(problem, fringe)</div></pre></td></tr></table></figure>
<h3 id="3-问题3：宽度优先算法（代价一致算法）"><a href="#3-问题3：宽度优先算法（代价一致算法）" class="headerlink" title="3.问题3：宽度优先算法（代价一致算法）"></a>3.问题3：宽度优先算法（代价一致算法）</h3><p>python pacman.py -l mediumMaze -p SearchAgent -a fn=ucs<br>python pacman.py -l mediumDottedMaze -p StayEastSearchAgent<br>python pacman.py -l mediumScaryMaze -p StayWestSearchAgent</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">def uniformCostSearch(problem):</div><div class="line">    &quot;&quot;&quot;Search the node of least total cost first.&quot;&quot;&quot;</div><div class="line">    &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">    cost = lambda aPath: problem.getCostOfActions([x[1] for x in aPath])    #计算出每条路径的总代价，通过总代价</div><div class="line">                                                                          #作为优先级进行搜索</div><div class="line">    fringe = util.PriorityQueueWithFunction(cost)        #fringe数据结构为优先队列</div><div class="line">    return graphSearch(problem, fringe)</div></pre></td></tr></table></figure>
<h3 id="4-问题4：A-算法"><a href="#4-问题4：A-算法" class="headerlink" title="4.问题4：A* 算法"></a>4.问题4：A* 算法</h3><p>python pacman.py -l bigMaze -z .5 -p SearchAgent -a fn=astar,heuristic=manhattanHeuristic</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">def nullHeuristic(state, problem=None):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    A heuristic function estimates the cost from the current state to the nearest</div><div class="line">    goal in the provided SearchProblem.  This heuristic is trivial.</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    return 0</div><div class="line"></div><div class="line">def aStarSearch(problem, heuristic=nullHeuristic):</div><div class="line">    &quot;&quot;&quot;Search the node that has the lowest combined cost and heuristic first.&quot;&quot;&quot;</div><div class="line">    &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">    cost = lambda aPath: problem.getCostOfActions([x[1] for x in aPath]) + heuristic(aPath[len(aPath)-1][0], problem)</div><div class="line">    fringe = util.PriorityQueueWithFunction(cost)  #A*是对代价一致搜索算法的改进，加入了一个估计代价h</div><div class="line">    return graphSearch(problem, fringe)</div></pre></td></tr></table></figure>
<h3 id="5-问题5：找到所有的角落"><a href="#5-问题5：找到所有的角落" class="headerlink" title="5.问题5：找到所有的角落"></a>5.问题5：找到所有的角落</h3><p>python pacman.py -l tinyCorners -p SearchAgent -a fn=bfs,prob=CornersProblem<br>python pacman.py -l mediumCorners -p SearchAgent -a fn=bfs,prob=CornersProblem</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">def getStartState(self):</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        Returns the start state (in your state space, not the full Pacman state</div><div class="line">        space)</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">        return (self.startingPosition, [self.corners[0], self.corners[1], self.corners[2], self.corners[3]]) </div><div class="line">                                                   #agent初始状态的位置，和四个角落的豆的位置</div><div class="line"></div><div class="line">    def isGoalState(self, state):</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        Returns whether this search state is a goal state of the problem.</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">        return len(state[1]) == 0           #state[0]为当前agent位置， state[1]为还没吃到的点的位置，state[1]为</div><div class="line">                                           #空时，结束为终止位置</div><div class="line">		</div><div class="line"></div><div class="line">    def getSuccessors(self, state):</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        Returns successor states, the actions they require, and a cost of 1.</div><div class="line"></div><div class="line">         As noted in search.py:</div><div class="line">            For a given state, this should return a list of triples, (successor,</div><div class="line">            action, stepCost), where &apos;successor&apos; is a successor to the current</div><div class="line">            state, &apos;action&apos; is the action required to get there, and &apos;stepCost&apos;</div><div class="line">            is the incremental cost of expanding to that successor</div><div class="line">        &quot;&quot;&quot;</div><div class="line"></div><div class="line">        successors = []</div><div class="line">        for action in [Directions.NORTH, Directions.SOUTH, Directions.EAST, Directions.WEST]:</div><div class="line">            # Add a successor state to the successor list if the action is legal</div><div class="line">            # Here&apos;s a code snippet for figuring out whether a new position hits a wall:</div><div class="line">            #   x,y = currentPosition</div><div class="line">            #   dx, dy = Actions.directionToVector(action)</div><div class="line">            #   nextx, nexty = int(x + dx), int(y + dy)</div><div class="line">            #   hitsWall = self.walls[nextx][nexty]</div><div class="line"></div><div class="line">            &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">            x,y = state[0]         #获取agent当前位置</div><div class="line">            dx, dy = Actions.directionToVector(action)   </div><div class="line">            nextx, nexty = int(x + dx), int(y + dy)   #下一个位置坐标</div><div class="line">            hitsWall = self.walls[nextx][nexty]      #判断是否撞到墙</div><div class="line">            if not hitsWall:                  #判断，没撞到墙</div><div class="line">				nextPosition = (nextx, nexty)      #下个位置坐标</div><div class="line">				cornersLeft = state[1][:]          #复制当前剩余没吃到的点</div><div class="line">				if nextPosition in cornersLeft:       #如果下个坐标在剩余没吃到的点中</div><div class="line">					cornersLeft.remove(nextPosition)         #因为下一个就能把它吃掉，所以把这个点从剩余</div><div class="line">                                                           #没吃到点的列表中删除</div><div class="line">				nextState = (nextPosition, cornersLeft)      #计算下一个点的坐标</div><div class="line">				cost = 1                                    #代价为1，（步数为1）</div><div class="line">				successors.append( ( nextState, action, cost) )     #属于可达的子状态，加入到子状态列表</div><div class="line"></div><div class="line">        self._expanded += 1 # DO NOT CHANGE</div><div class="line">        return successors</div></pre></td></tr></table></figure>
<h3 id="6-问题6：角落问题（启发式）"><a href="#6-问题6：角落问题（启发式）" class="headerlink" title="6.问题6：角落问题（启发式）"></a>6.问题6：角落问题（启发式）</h3><p>python pacman.py -l mediumCorners -p AStarCornersAgent -z 0.5</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">def cornersHeuristic(state, problem):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    A heuristic for the CornersProblem that you defined.</div><div class="line"></div><div class="line">      state:   The current search state</div><div class="line">               (a data structure you chose in your search problem)</div><div class="line"></div><div class="line">      problem: The CornersProblem instance for this layout.</div><div class="line"></div><div class="line">    This function should always return a number that is a lower bound on the</div><div class="line">    shortest path from the state to a goal of the problem; i.e.  it should be</div><div class="line">    admissible (as well as consistent).</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    corners = problem.corners # These are the corner coordinates</div><div class="line">    walls = problem.walls # These are the walls of the maze, as a Grid (game.py)</div><div class="line"></div><div class="line">    &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">    heuristic = 0</div><div class="line">    cornersLeft = state[1][:]      #剩余点的坐标</div><div class="line">    referencePoint = state[0]      #当前点的坐标</div><div class="line">  </div><div class="line">    while len(cornersLeft) &gt; 0:        #当有点剩余（未吃完所有点）</div><div class="line">		closestCorner = closestPoint(referencePoint, cornersLeft)   #当前点坐标和未吃到点中的哪一个离得最近</div><div class="line">		heuristic += euclidieanDistance(referencePoint, closestCorner) #估计值h加上当前点到最近未吃点的距离</div><div class="line">		referencePoint = closestCorner               #当前点变为最近未吃点，因为已经走到了那个点</div><div class="line">		cornersLeft.remove(closestCorner)           #从未吃点列表中将刚才吃掉的点删除</div><div class="line">	  </div><div class="line">    return heuristic</div><div class="line">    #return 0 # Default to trivial solution</div><div class="line">def closestPoint (fromPoint, candidatesList):</div><div class="line">  if len(candidatesList) == 0:                    #如果未吃点列表为空，证明所有点都被吃了，返回none</div><div class="line">  	return None</div><div class="line"></div><div class="line">  closestCorner = candidatesList[0]             #获取未吃点列表中的第一个点</div><div class="line">  closestCost = euclidieanDistance(fromPoint, closestCorner)    #计算当前点到第一个点距离</div><div class="line">  for candidate in candidatesList[1:]:</div><div class="line">  	thisCost = euclidieanDistance(fromPoint, candidate)</div><div class="line">  	if closestCost &gt; thisCost:                     #循环遍历列表，返回距当前点最近的一个未吃点的坐标</div><div class="line">  		closestCost = thisCost</div><div class="line">  		closestCorner = candidate</div><div class="line">  </div><div class="line">  return closestCorner</div><div class="line"> </div><div class="line">def euclidieanDistance (pointA, pointB):  </div><div class="line">	return abs(pointA[0] - pointB[0]) + abs(pointA[1] - pointB[1])#因为坐标为表格化，不能斜着走，所以最短距离为|x|+|y|</div></pre></td></tr></table></figure>
<h3 id="7-问题7：吃掉所有的豆子（这个程序有点卡，稍等一会）"><a href="#7-问题7：吃掉所有的豆子（这个程序有点卡，稍等一会）" class="headerlink" title="7.问题7：吃掉所有的豆子（这个程序有点卡，稍等一会）"></a>7.问题7：吃掉所有的豆子（这个程序有点卡，稍等一会）</h3><p>python pacman.py -l testSearch -p AStarFoodSearchAgent<br>python pacman.py -l trickySearch -p AStarFoodSearchAgent</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">def foodHeuristic(state, problem):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    Your heuristic for the FoodSearchProblem goes here.</div><div class="line"></div><div class="line">    This heuristic must be consistent to ensure correctness.  First, try to come</div><div class="line">    up with an admissible heuristic; almost all admissible heuristics will be</div><div class="line">    consistent as well.</div><div class="line"></div><div class="line">    If using A* ever finds a solution that is worse uniform cost search finds,</div><div class="line">    your heuristic is *not* consistent, and probably not admissible!  On the</div><div class="line">    other hand, inadmissible or inconsistent heuristics may find optimal</div><div class="line">    solutions, so be careful.</div><div class="line"></div><div class="line">    The state is a tuple ( pacmanPosition, foodGrid ) where foodGrid is a Grid</div><div class="line">    (see game.py) of either True or False. You can call foodGrid.asList() to get</div><div class="line">    a list of food coordinates instead.</div><div class="line"></div><div class="line">    If you want access to info like walls, capsules, etc., you can query the</div><div class="line">    problem.  For example, problem.walls gives you a Grid of where the walls</div><div class="line">    are.</div><div class="line"></div><div class="line">    If you want to *store* information to be reused in other calls to the</div><div class="line">    heuristic, there is a dictionary called problem.heuristicInfo that you can</div><div class="line">    use. For example, if you only want to count the walls once and store that</div><div class="line">    value, try: problem.heuristicInfo[&apos;wallCount&apos;] = problem.walls.count()</div><div class="line">    Subsequent calls to this heuristic can access</div><div class="line">    problem.heuristicInfo[&apos;wallCount&apos;]</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    position, foodGrid = state</div><div class="line">    &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">    foodList = foodGrid.asList()      #得到要吃的点的列表（未吃点列表）</div><div class="line">    if len(foodList) == 0:            #当未吃点列表为空时，停止</div><div class="line">  	   return 0</div><div class="line">  </div><div class="line">    closestFood = closestPoint(position, foodList)     #得到离当前点最近的未吃食物</div><div class="line">    return euclidieanDistance(position, closestFood) + len(foodList)</div></pre></td></tr></table></figure>
<h3 id="8-问题8：次最优搜索"><a href="#8-问题8：次最优搜索" class="headerlink" title="8.问题8：次最优搜索"></a>8.问题8：次最优搜索</h3><p>python pacman.py -l bigSearch -p ClosestDotSearchAgent -z .5</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">class ClosestDotSearchAgent(SearchAgent):</div><div class="line">    &quot;Search for all food using a sequence of searches&quot;</div><div class="line">    def registerInitialState(self, state):</div><div class="line">        self.actions = []</div><div class="line">        currentState = state</div><div class="line">        while(currentState.getFood().count() &gt; 0):</div><div class="line">            nextPathSegment = self.findPathToClosestDot(currentState) # The missing piece</div><div class="line">            self.actions += nextPathSegment</div><div class="line">            for action in nextPathSegment:</div><div class="line">                legal = currentState.getLegalActions()</div><div class="line">                if action not in legal:</div><div class="line">                    t = (str(action), str(currentState))</div><div class="line">                    raise Exception, &apos;findPathToClosestDot returned an illegal move: %s!\n%s&apos; % t</div><div class="line">                currentState = currentState.generateSuccessor(0, action)</div><div class="line">        self.actionIndex = 0</div><div class="line">        print &apos;Path found with cost %d.&apos; % len(self.actions)</div><div class="line"></div><div class="line">    def findPathToClosestDot(self, gameState):</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        Returns a path (a list of actions) to the closest dot, starting from</div><div class="line">        gameState.</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        # Here are some useful elements of the startState</div><div class="line">        startPosition = gameState.getPacmanPosition()</div><div class="line">        food = gameState.getFood()</div><div class="line">        walls = gameState.getWalls()</div><div class="line">        problem = AnyFoodSearchProblem(gameState)</div><div class="line"></div><div class="line">        &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">        return search.aStarSearch(problem,search.nullHeuristic)     #A*搜索</div><div class="line"></div><div class="line">class AnyFoodSearchProblem(PositionSearchProblem):</div><div class="line">    &quot;&quot;&quot;</div><div class="line">    A search problem for finding a path to any food.</div><div class="line"></div><div class="line">    This search problem is just like the PositionSearchProblem, but has a</div><div class="line">    different goal test, which you need to fill in below.  The state space and</div><div class="line">    successor function do not need to be changed.</div><div class="line"></div><div class="line">    The class definition above, AnyFoodSearchProblem(PositionSearchProblem),</div><div class="line">    inherits the methods of the PositionSearchProblem.</div><div class="line"></div><div class="line">    You can use this search problem to help you fill in the findPathToClosestDot</div><div class="line">    method.</div><div class="line">    &quot;&quot;&quot;</div><div class="line"></div><div class="line">    def __init__(self, gameState):</div><div class="line">        &quot;Stores information from the gameState.  You don&apos;t need to change this.&quot;</div><div class="line">        # Store the food for later reference</div><div class="line">        self.food = gameState.getFood()</div><div class="line"></div><div class="line">        # Store info for the PositionSearchProblem (no need to change this)</div><div class="line">        self.walls = gameState.getWalls()</div><div class="line">        self.startState = gameState.getPacmanPosition()</div><div class="line">        self.costFn = lambda x: 1</div><div class="line">        self._visited, self._visitedlist, self._expanded = &#123;&#125;, [], 0 # DO NOT CHANGE</div><div class="line"></div><div class="line">    def isGoalState(self, state):</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        The state is Pacman&apos;s position. Fill this in with a goal test that will</div><div class="line">        complete the problem definition.</div><div class="line">        &quot;&quot;&quot;</div><div class="line">        x,y = state</div><div class="line"></div><div class="line">        &quot;*** YOUR CODE HERE ***&quot;</div><div class="line">        return self.food[x][y]            #state为终点坐标</div></pre></td></tr></table></figure>
<h2 id="三、总结："><a href="#三、总结：" class="headerlink" title="三、总结："></a>三、总结：</h2><p>这东西还是挺好玩的，希望本文对大家有用</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://lovebear.top/2016/12/13/Pacman_project1代码及解析/" data-id="ciwo6tntd0003ngosv418uqg9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2016/12/11/Ubuntu-Python_Version/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Ubuntu Python 默认使用版本改变</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/hexo/" style="font-size: 20px;">hexo</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/12/13/Pacman_project1代码及解析/">Pacman_project1代码及解析</a>
          </li>
        
          <li>
            <a href="/2016/12/11/Ubuntu-Python_Version/">Ubuntu Python 默认使用版本改变</a>
          </li>
        
          <li>
            <a href="/2016/10/08/Hexo-Your-Blog/">Hexo Your Blog</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 lovebear<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo&nbsp;&nbsp;&nbsp;&nbsp;</a>
	    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
		</script>
		<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
		<span id="busuanzi_container_site_pv">
			Total Visit: <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> times
		</span>
    </div>
  </div>

</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>